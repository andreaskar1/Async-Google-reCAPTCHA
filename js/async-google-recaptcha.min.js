/******************************************************
*                                                     *
*   Async reCAPTCHA - jQuery Plugin                   *
*                                                     *
*   Purpose: This project contains a simple and       *
*            full configurable jQuery plugin which    *
*            asynchronously loads one or multiple     *
*            Google reCAPTCHA v2 instances located    *
*            on a page. The load is triggered when    *
*            the reCAPTCHA is scrolled into viewport. *
*                                                     *
*   Author: Andreas Kar (thex) <andreas.kar@gmx.at>   *
*   Repository: https://git.io/JvyqU                  *
*                                                     *
******************************************************/

!function(a){a.fn.asyncReCAPTCHA=function(n){var e=a.extend(!0,{},a.fn.asyncReCAPTCHA.defaults,n);e.containers=this,e.setHeight(e),e.attachSpinner(e),e.triggerAsyncLoad(e),e.checkAndLoad(e)},a.fn.asyncReCAPTCHA.defaults={offset:0,libraryUrl:"https://www.google.com/recaptcha/api.js",fixHeight:!1,spinner:{attach:!1,remove:!1,type:"included",spinnerClass:"async-recaptcha-spinner",spinnerCtnClass:"async-recaptcha-spinner-ctn",bsSpinnerClass:"spinner-border",customSpinner:"",delay:1e4},isInViewport:function(n){var e=a(this).offset().top,t=e+a(this).outerHeight(),s=a(window).scrollTop(),i=s+a(window).height();return s<t&&e+n.offset<i},setHeight:function(n){n.fixHeight&&a(n.containers).each(function(){a(this).attr("style","min-height:78px;")})},removeSpinner:function(n){setTimeout(function(){a(this).parent().find("."+n.spinner.spinnerCtnClass).remove()}.bind(this),n.spinner.delay)},attachSpinner:function(n){var e,t,s=n.spinner;s.attach&&a(n.containers).each(function(){"bootstrap"==s.type?(e=a("<div>").addClass(s.bsSpinnerClass+" "+s.spinnerClass).attr("role","status")).prepend(a("<span>").addClass("sr-only").html("Loading...")):"included"==s.type?e=a("<div>").addClass("simple-spinner "+s.spinnerClass).attr("role","status"):"custom"==s.type&&(e=a(s.customSpinner).addClass(s.spinnerClass)),t=a("<div>").addClass(s.spinnerCtnClass).prepend(e),a(this).parent().prepend(t)})},triggerAsyncLoad:function(n){a(window).on("resize scroll",function(){n.checkAndLoad(n)})},checkAndLoad:function(n){var e;a((e=n).containers).each(function(){var n=a(this);!a.trim(a(this).html())&&e.isInViewport.call(n,e)&&(e.beforeLoad.call(n,e),jQuery.getScript(e.libraryUrl),e.spinner.remove&&e.removeSpinner.call(n,e),e.afterLoad.call(n,e))})},beforeLoad:function(n){},afterLoad:function(n){}}}(jQuery);